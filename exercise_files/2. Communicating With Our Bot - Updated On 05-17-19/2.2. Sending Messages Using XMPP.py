from sleekxmpp import ClientXMPP

class SendMsgBot(ClientXMPP):

    def __init__(self, jid, password, recipient, message):
        ClientXMPP.__init__(self, jid, password)

        self.recipient = recipient
        self.msg = message

        self.add_event_handler("session_start", self.start, threaded=True)

    def start(self, event):

        self.send_presence()
        self.get_roster()

        self.send_message(mto=self.recipient,
                          mbody=self.msg,
                          mtype='chat')


        self.disconnect(wait=True)

def xmppsendFunc(xmpsndr, xmppas, xmptar, messagestr):
	xmpp = SendMsgBot(xmpsndr, xmppas, xmptar, messagestr)
	xmpp.register_plugin('xep_0030') # Service Discovery
	xmpp.register_plugin('xep_0199') # XMPP Ping

	if xmpp.connect():
		xmpp.process(block=True)
		print("Done") 
	else:
		print("Unable to connect.") 

xmppsendFunc('xmpp_username', 'xmpp_pass', 'recipient_xmpp_username', 
    'This message is sent from Python using sleekxmpp library.')