from sleekxmpp import ClientXMPP

class RecieveBot(ClientXMPP):

    def __init__(self, jid, password):
        ClientXMPP.__init__(self, jid, password)

        self.add_event_handler("session_start", self.session_start, threaded=True)
        self.add_event_handler("message", self.message)

    def session_start(self, event):
        self.send_presence()

    def message(self, msg):
    	if msg['type'] in ('normal', 'chat'):
            print ("The message you sent was: " + msg['body'])
    	self.disconnect(wait=True)
    		

def xmpreceiveFunc(xmprcvr, xmppas):
	xmpp = RecieveBot(xmprcvr, xmppas)
	xmpp.register_plugin('xep_0030') # Service Discovery
	xmpp.register_plugin('xep_0004') # Data Forms
	xmpp.register_plugin('xep_0060') # PubSub
	xmpp.register_plugin('xep_0199') # XMPP Ping

	if xmpp.connect():
		xmpp.process(block=True)
		
		print ("Done")
	else:
		print ("Unable to connect.")

xmpreceiveFunc('xmpp_username', 'xmpp_pass')