import socket
from time import sleep


def has_stable_connection() -> bool:
    try:
        socket.create_connection(('www.google.com', 80))
        return True
    except:
        return False


def execute_on_stable_connection(func: callable):
    while not has_stable_connection():
        print('No stable connection...')
        sleep(5)
    func()


execute_on_stable_connection(lambda: print("Stable connection!"))
