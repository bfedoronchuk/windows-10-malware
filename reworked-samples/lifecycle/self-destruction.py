from sys import executable
from subprocess import Popen


def self_destruct():
    executable_name = executable.split("\\")[-1]

    batch_script_content = "\n".join([
        "@ech off",
        'TASKKILL /F /IM "{0}"'.format(executable_name),
        'DEL -f "{0}"'.format(executable_name),
        'DEL "%~f0"',
    ])
    batch_script = open("utility.bat", "w")
    batch_script.write(batch_script_content)
    batch_script.close()

    Popen("utility.bat >> NUL", shell=True)

