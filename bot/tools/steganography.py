from stegano import lsbset
from stegano.lsbset import generators


def hide(message: str, image_src_path: str, image_destination_path: str):
    """Hide a message in an image.
    Example:
    hide("I love ponies.", "image.jpg", "hidden.png")
    """
    # doesn't work with .jpg, but works with .png
    if not image_destination_path.endswith(".png"):
        raise Exception("Destination image should have .png extension")
    image = lsbset.hide(image_src_path, message, generators.eratosthenes())
    image.save(image_destination_path)


def reveal(image_path: str) -> str:
    """Find a message in an image.
    Example:
    reveal("hidden.png")
    """
    try:
        return lsbset.reveal(image_path, generators.eratosthenes())
    except FileNotFoundError:
        return ""
    except IndexError:  # no hidden message in the image
        return ""
